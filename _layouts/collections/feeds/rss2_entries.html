---
layout: null
---
{%- capture rss_workspace -%}
  {%- comment -%}
    Big thanks to - https://stackoverflow.com/a/42057699/2632107
     and - https://gist.github.com/roachhd/f664d2cae2da899be3f6

    Configuration note; one should have `site.url` assigned,
     either via `url: "http://example.com"` or through
     `build`/`serve` Jekyll command line options.

    ___
    License note from S0AndS0; an editor in this context.

    Minima (the default Jekyll Theme), is shared under the
    MIT Lisense, https://github.com/jekyll/minima/blob/master/LICENSE.txt

    Thus these alterations to Minima source code are re-shared under the MIT Lisense
  {%- endcomment -%}

  {%- assign date_format = '%a, %d %b %Y %T %z' -%}
  {%- assign collection_name = page.collection_name | default: include.collection_name | default: nil -%}
  {%- assign target_collection = site[collection_name] -%}

  {%- assign collection_home = page.collection_home | default: collection_name -%}
  {%- assign collection_description = page.description | default: site.description -%}
  {%- assign this_time_stamp = page.date | date: '%s' -%}
  {%- assign latest_time_stamp = page.date | date: '%s' -%}
  {%- assign rss_items_has_output = False -%}


  {%- capture rss_items_workspace -%}
    {%- for post in target_collection -%}
      {%- assign post_file_name = post.url | split: '/' | last | split: '.' | first -%}
      {%- if page.relative_path == post.relative_path or post_file_name == 'feed' -%}
        {%- continue -%}
      {%- elsif post_file_name == collection_name or post_file_name == 'index' -%}
        {%- continue -%}
      {%- else -%}
        {%- assign rss_items_has_output = True -%}
      {%- endif -%}

      {%- assign post_synopsis = post.description | default: post.excerpt -%}

      <item>
        <title>{{- post.title | xml_escape -}}</title>
        <link>{{- post.url | absolute_url -}}</link>
        <guid isPermaLink="true">{{- post.url | absolute_url -}}</guid>
        <pubDate>{{- post.date | date: date_format -}}</pubDate>
        <description>{{- post_synopsis | xml_escape -}}</description>
      </item>

      {%- assign this_time_stamp = post.date | date: '%s' -%}
      {%- if latest_time_stamp < this_time_stamp -%}{%- comment -%}> Syntax highlighting work-around{%- endcomment -%}
        {%- assign latest_time_stamp = this_time_stamp -%}
      {%- endif -%}

      {%- assign post_file_name = nil -%}
      {%- assign post_synopsis = nil -%}
    {%- endfor -%}
  {%- endcapture -%}


  <?xml version="1.0" encoding="UTF-8" ?>
  <rss version="2.0">
    <channel>
      <title>{{- page.title | default: 'RSS Title' | xml_escape -}}</title>
      <description>{{ collection_description | xml_escape }}</description>
      <link>{{- page.url | absolute_url -}}</link>
      <lastBuildDate>{{- site.time | date: date_format -}}</lastBuildDate>
      <pubDate>{{- latest_time_stamp | date: date_format -}}</pubDate>
      <ttl>{{- page.time_to_live | default: '1800' -}}</ttl>
      {%- if rss_items_has_output == True -%}
        {{- rss_items_workspace | strip -}}{%- assign rss_items_workspace = nil -%}
      {%- endif -%}
    </channel>
  </rss>
{%- endcapture -%}{{- rss_workspace | strip -}}{%- assign rss_workspace = nil -%}
